# 接口错误码说明

# 接口错误码说明

以下文档汇总了当前 SDK/REST API 可能返回的错误码及其含义、常见触发场景与建议处理方案，方便开发者在集成与排查问题时快速定位原因。

## 总览表

| 错误码 | 错误标识                 | 含义简介                           |
| :----: | ------------------------ | ---------------------------------- |
| 301    | PARAMS_INVALID           | 参数错误                           |
| 380    | WORKFLOW_NOT_EXISTS      | 指定的工作流不存在                 |
| 412    |TOKEN_INVALID             | API接口路径拼写错误                |
| 415    | TASK_INSTANCE_MAXED      | 独占型 API 可用机器数不足          |
| 416    | TASK_CREATE_FAILED_BY_NOT_ENOUGH_WALLET      | 钱包余额不足          |
| 421    | TASK_QUEUE_MAXED         | 共享型 API 并发数已达上限          |
| 423    | TASK_NOT_FOUNED          | 未找到指定任务                     |
| 433    | VALIDATE_PROMPT_FAILED   | 工作流合法性校验未通过             |
| 435    | TASK_USER_EXCLAPI_INSTANCE_NOT_FOUND   | 未找到任务用户API实例             |
| 436    |TASK_USER_EXCLAPI_REQUIRED|独占会员到期
| 801    | APIKEY_UNSUPPORTED_FREE_USER | 免费用户不支持 API Key            |
| 802    | APIKEY_UNAUTHORIZED      | API Key 未授权/已失效              |
| 803    | APIKEY_INVALID_NODE_INFO | nodeInfoList 与工作流不匹配        |
| 804    | APIKEY_TASK_IS_RUNNING   | 任务正在运行中                     |
| 805    | APIKEY_TASK_STATUS_ERROR | 任务状态异常                       |
| 806    | APIKEY_USER_NOT_FOUND    | 未找到对应用户                     |
| 807    | APIKEY_TASK_NOT_FOUND    | 未找到对应任务                     |
| 808    | APIKEY_UPLOAD_FAILED     | 文件上传失败                       |
| 809    | APIKEY_FILE_SIZE_EXCEEDED| 文件大小超出限制                   |
| 810    |WORKFLOW_NOT_SAVED_OR_NOT_RUNNING|未保存工作流或未运行直接调用|
| 811    | CORPAPIKEY_INVALID       | 企业版 API Key 无效                |
| 812    | CORPAPIKEY_INSUFFICIENT_FUNDS | 企业版余额不足                  |
| 813    | APIKEY_TASK_IS_QUEUED    | 任务已排队等待执行                 |
| 901    | WEBAPP_NOT_EXISTS        | WebApp 不存在                      |
| 500    | UNKNOWN_ERROR            | 未知错误                           |

---

## 关键错误码详解

### 301 PARAMS_INVALID

* **含义**：请求中包含非法或缺失的参数。  
* **常见原因**：  
  * 必填字段为空或格式不符  
  * 参数类型与接口文档不匹配  
* **处理建议**：  
  1. 对照最新版接口说明逐一核对字段名、类型、取值范围。  
  2. 可先用接口示例中的最小请求体测试，确认示例可正常返回后再逐步替换为业务参数。

---

### 415 TASK_INSTANCE_MAXED

* **含义**：独占型 API 当前可用的实例/机器数不足。  
* **可能场景**：  
  * 系统正在升级或故障自动恢复  
  * 任务并发数达到独占机器上限  
* **处理建议**：  
  1. 等待 30 ~ 120 秒后重试；  
  2. 若长时间持续出现，可联系技术支持了解资源状态。

---

### 421 TASK_QUEUE_MAXED

* **含义**：共享型 API 的并发数已达到用户上限。  
* **影响**：新的任务会被系统拒绝。  
* **处理建议**：  
  1. 在客户端自行排队，等待已有任务完成后再发起；  
  2. 并发需求显著提升时，可联系我们扩充额度。

---

### 433 VALIDATE_PROMPT_FAILED

* **含义**：工作流合法性校验未通过（包含 prompt 与节点配置校验）。  
* **常见原因**：  
  * 节点的输入输出衔接不符合规则  
  * 字段缺失或格式错误  
* **处理建议**：  
  1. 根据返回的 `msg` 字段定位出错节点及字段；  
  2. 调整工作流参数后重新发起请求。

---
### 435 TASK_USER_EXCLAPI_INSTANCE_NOT_FOUND

* **含义**：未找到任务用户API实例。  
* **常见原因**：  
  * 企业级功共享或独占api调用接口时发生。  
* **处理建议**：  
  1. 调用接口时添加参数"instanceType": "plus"。  

---

### 803 APIKEY_INVALID_NODE_INFO

* **含义**：传入的 `nodeInfoList` 与绑定的工作流不匹配。  
* **排查清单**：  
  * `nodeId` 是否存在于工作流定义  
  * `fieldName`、`fieldValue` 是否与节点输入字段一致  
* **处理建议**：  
  1. 重新获取/确认最新的工作流节点信息；  
  2. 确保每个节点的字段名与类型完全对应后，再次提交请求。

---

### 810 WORKFLOW_NOT_SAVED_OR_NOT_RUNNING

* **含义**：用户未保存工作流或未在平台运行直接调用api
* **常见原因**：  
  * 在点击打开他人的工作流之后，用户未在平台运行一次或者未保存成自己的工作流
  * 调用自己的工作流时未在平台上运行或者未保存
* **处理建议**：  
  1. 第一次调用工作流时点击保存。 
  2. 先用平台运行一次工作流之后就可以使用api调用。
<img src="https://api.apifox.com/api/v1/projects/6103976/resources/590469/image-preview" alt="image" width="500">

---

### 500 UNKNOWN_ERROR

* **含义**：未被显式捕获的异常。  
* **常见诱因**：  
  * 请求体格式不合法（JSON 拼写、转义符等）  
  * 内部服务瞬时故障  
* **处理建议**：  
  1. 首先确认接口示例请求体可正常调用；  
  2. 若示例请求成功、业务请求始终 500，请保存完整请求/响应日志并与我们联系排查。  

---

## 其他错误码处理要点

* 380/901 等「不存在」类错误  
  * 确保资源 ID 正确。  
* 804/813 等「任务进行中 / 排队」类错误  
  * 无需重复创建任务，可查询任务接口等待完成或者采用webhook方式等待结果回调。  
* 811/812 企业版 API Key 相关错误  
  * 检查密钥是否过期、余额是否充足。  

---

### 联系方式

如需扩充并发、排查疑难 5xx 问题或获取更多技术支持，请通过官方渠道（qq群）与我们联系，并附上：

* 请求时间与 taskId 
* 完整的请求报文
* 错误码与返回消息  

我们将尽快协助解决。